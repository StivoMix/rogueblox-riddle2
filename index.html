<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Rogueblox Riddle 2</title>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: monospace;
      text-align: center;
      margin: 0;
      padding: 20px;
    }

    h1 {
      font-size: 36px;
      color: #00ff00;
    }

    .orb-container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin: 30px auto;
      max-width: 600px;
    }

    .orb {
      width: 80px;
      height: 80px;
      background: radial-gradient(circle, #00ff00 0%, #004400 100%);
      border: 2px solid lime;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      position: relative;
      animation: pulse 2s infinite ease-in-out;
      cursor: pointer;
    }

    .orb-code {
      position: absolute;
      bottom: -25px;
      font-size: 12px;
      color: #00ffcc;
    }

    .orb.unlocked {
      background: radial-gradient(circle, #00ff99 0%, #005500 100%);
      box-shadow: 0 0 12px 3px lime;
      animation: unlockGlow 1s ease-in-out, pulse 2s infinite ease-in-out;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    @keyframes unlockGlow {
      0% {
        transform: scale(1);
        box-shadow: 0 0 0px 0px lime;
      }
      50% {
        transform: scale(1.2);
        box-shadow: 0 0 20px 10px lime;
      }
      100% {
        transform: scale(1);
        box-shadow: 0 0 12px 3px lime;
      }
    }

    input, select, button {
      font-size: 16px;
      margin: 5px;
      padding: 5px;
    }

    input, select {
      background-color: #111;
      color: #00ff00;
      border: 2px solid lime;
      border-radius: 8px;
      padding: 10px;
      font-size: 16px;
      transition: all 0.3s ease;
    }

    input:focus, select:focus {
      outline: none;
      border-color: #00ffcc;
      box-shadow: 0 0 10px 2px lime;
    }

    button {
      background-color: #111;
      color: #00ff00;
      border: 2px solid lime;
      border-radius: 8px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    button:hover {
      background-color: #222;
      color: #00ffcc;
      box-shadow: 0 0 10px 2px lime;
    }

    #hintText {
      margin-top: 10px;
      font-size: 14px;
      color: #cccccc;
    }

    #final-section {
      margin-top: 40px;
      display: none;
    }

    #prowlercryptor {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 250px;
      background-color: #111;
      padding: 10px;
      border: 1px solid lime;
      border-radius: 8px;
      font-size: 14px;
      color: #00ffcc;
      z-index: 999;
    }

    #prowlercryptor input {
      width: 85%;
      font-size: 14px;
      margin-bottom: 5px;
    }

    #prowlercryptor button {
      font-size: 14px;
      width: 90%;
      margin-bottom: 5px;
    }

    #reset-button-container {
    position: fixed;
    bottom: 20px;
    left: 20px;
    z-index: 1000;
  }

  #reset-button {
    background-color: #111;
    color: #00ff00;
    border: 2px solid lime;
    border-radius: 8px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  #reset-button:hover {
    background-color: #222;
    color: #00ffcc;
    box-shadow: 0 0 10px 2px lime;
  }
  </style>
</head>
<body>
  <h1>Collect my plasma orbs.</h1>
  <div class="orb-container">
    <div class="orb" onclick="clickOrb(1)">1<div class="orb-code" id="orb1-code"></div></div>
    <div class="orb">2<div class="orb-code" id="orb2-code"></div></div>
    <div class="orb">3<div class="orb-code" id="orb3-code"></div></div>
    <div class="orb">4<div class="orb-code" id="orb4-code"></div></div>
    <div class="orb">5<div class="orb-code" id="orb5-code"></div></div>
    <div class="orb">6<div class="orb-code" id="orb6-code"></div></div>
  </div>

  <div id="submit-section">
    <input type="text" id="codeInput" placeholder="Submit plasma orb" />
    <button onclick="submitCode()">Submit</button>
  </div>  

  <div id="hint-box">
    <label for="hintSelect">Need a hint?</label>
    <select id="hintSelect">
      <option value="1">Orb 1</option>
      <option value="2">Orb 2</option>
      <option value="3">Orb 3</option>
      <option value="4">Orb 4</option>
      <option value="5">Orb 5</option>
      <option value="6">Orb 6</option>
    </select>
    <button onclick="showHint()">Get Hint</button>
    <p id="hintText"></p>
  </div>  

  <div id="final-section">
    <input type="text" id="finalInput" placeholder="Enter final password" />
    <button onclick="submitFinal()">Submit Final</button>
  </div>

  <p id="finalHint" style="display: none; color: #cccccc; font-style: italic;">
    The orbs spell something... backwards. Encrypt it.
  </p>

  <div id="prowlercryptor">
    <h3>The Prowlercryptor</h3>
    <input type="text" id="cryptInput" placeholder="Enter text to encrypt" />
    <button onclick="runEncrypt()">Encrypt</button>
    <p id="cryptOutput">Encrypted result will appear here.</p>
  </div>  

  <div id="reset-button-container">
    <button id="reset-button" onclick="resetOrbs()">Reset Orbs</button>
  </div>

  <audio id="unlockSound" src="soundeffects/unlock.mp3"></audio>
  <audio id="hoverSound" src="soundeffects/hover.mp3"></audio>
  <audio id="clickSound" src="soundeffects/click.mp3"></audio>
  <audio id="selectionSound" src="soundeffects/selection.mp3"></audio>
  <audio id="selectSound" src="soundeffects/select.mp3"></audio>
  <audio id="inputFocusSound" src="soundeffects/input.mp3"></audio>

  <script>
    async function sha256(text) {
      const encoder = new TextEncoder();
      const data = encoder.encode(text);
      const hashBuffer = await crypto.subtle.digest("SHA-256", data);
      const hashArray = Array.from(new Uint8Array(hashBuffer));
      return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
    }
  
    const orbHashes = {
      1: "0858d974deae352fcd99a8b63fd6d8b1b8d3cff63d81b89b6d40726cb88ddc28",
      2: "edacbc854c960eccadaeff8970b3af304caeeff297535e980148bf5ba3c6b411",
      3: "99e5c5fbe217ebdf4b64be68c35b260fe3c940ae639fb30ccbf7c9f18b953c85",
      4: "d419943286c1501493a52a0f74aaa7e61d183a3a1460d22333e3e192e3c2fb7f",
      5: "3d4739b5b4441635b245af22ad509e8f8384a6f5ac4f8d7e887a4a9d77dfa2b5",
      6: "0e408a44d72aa3ba09fb86ad2ba510a759581954affd4ac7ed85236d78a67711"
    };
  
    const finalHash = "f619da3480fe82d3a09ac2b6e9235197c3948cc64b6c5fd2085596c4655a357e";
    const orbStates = JSON.parse(localStorage.getItem('orbStates')) || { 1: false, 2: false, 3: false, 4: false, 5: false, 6: false };
    let orb1Clicks = 0;
  
    function crptyString(text) {
      let result = '';
      for (let index = 0; index < text.length; index++) {
        result += String.fromCharCode(text.charCodeAt(index) + index);
      }
      return result;
    }
  
    function saveProgress() {
      localStorage.setItem('orbStates', JSON.stringify(orbStates));
    }
  
    function markOrbUnlocked(orbNum, code) {
      orbStates[orbNum] = true;
      displayOrbCode(orbNum, code);

      const unlockSound = document.getElementById("unlockSound");
      unlockSound.currentTime = 0;
      unlockSound.play();

      const orbElement = document.querySelector(`.orb:nth-child(${orbNum})`);
      orbElement.classList.add("unlocked");

      saveProgress();
      checkAllOrbsCollected();
    }
  
    function clickOrb(orbNum) {
      if (orbNum === 1 && !orbStates[1]) {
        orb1Clicks++;
        if (orb1Clicks >= 10) {
          markOrbUnlocked(1, crptyString("HNUIN<CL="));
        }
      }
    }
  
    async function submitCode() {
      const input = document.getElementById("codeInput").value.trim();
      const hashedInput = await sha256(input);
  
      for (let i = 1; i <= 6; i++) {
        if (!orbStates[i] && hashedInput === orbHashes[i]) {
          markOrbUnlocked(i, input);
          return;
        }
      }
  
      alert("Invalid or already used code.");
    }
  
    function displayOrbCode(orbNum, code) {
      document.getElementById(`orb${orbNum}-code`).textContent = code;
    }
  
    function showHint() {
      const val = document.getElementById("hintSelect").value;
      const hints = {
        1: "Reach out tenfold to find the howl...",
        2: "Leap into the void of tundra and shout the sacred words.",
        3: "The prowler encrypts again... for the third time.",
        4: "I am in every banner. Four letters long.",
        5: "He who taught humanity the art of ultimate assassination.",
        6: "A fortress shaped like fallen angels, my very own..."
      };
      document.getElementById("hintText").textContent = hints[val];
    }
  
    async function submitFinal() {
      const entered = document.getElementById("finalInput").value.trim();
      const hashed = await sha256(entered);
      if (hashed === finalHash) {
        sessionStorage.setItem("authenticated", "true");
        window.location.href = "correct.html";
      } else {
        alert("Wrong final password!");
      }
    }
  
    function checkAllOrbsCollected() {
      const allCollected = Object.values(orbStates).every(state => state === true);
      if (allCollected) {
        document.getElementById("final-section").style.display = "block";
        document.getElementById("submit-section").style.display = "none";
        document.getElementById("hint-box").style.display = "none";
        document.getElementById("finalHint").style.display = "block";
      }
    }
  
    function runEncrypt() { 
      const input = document.getElementById("cryptInput").value.trim();
      const result = crptyString(input);
      document.getElementById("cryptOutput").textContent = result || "Encrypted result will appear here.";
    }
  
    window.onload = () => {
      for (let i = 1; i <= 6; i++) {
        if (orbStates[i]) {
          displayOrbCode(i, "(unlocked)");
          document.querySelector(`.orb:nth-child(${i})`).classList.add("unlocked");
        }
      }
      checkAllOrbsCollected();
    };

    function resetOrbs() {
      localStorage.removeItem('orbStates');
      location.reload();
    }

    function playHoverSound() {
      const hoverSound = document.getElementById("hoverSound");
      hoverSound.currentTime = 0;
      hoverSound.play();
    }

    function playClickSound() {
      const clickSound = document.getElementById("clickSound");
      clickSound.currentTime = 0;
      clickSound.play();
    }

    document.querySelectorAll("button").forEach(button => {
      button.addEventListener("mouseover", playHoverSound);
      button.addEventListener("click", playClickSound);
    });

    function playSelectionSound() {
      const selectionSound = document.getElementById("selectionSound");
      selectionSound.currentTime = 0;
      selectionSound.play();
    }

    function playSelectSound() {
      const selectSound = document.getElementById("selectSound");
      selectSound.currentTime = 0;
      selectSound.play();
    }

    const hintSelect = document.getElementById("hintSelect");
    hintSelect.addEventListener("focus", playSelectionSound);
    hintSelect.addEventListener("change", playSelectSound);

    function playInputFocusSound() {
        const inputFocusSound = document.getElementById("inputFocusSound");
        inputFocusSound.currentTime = 0;
        inputFocusSound.play();
    }

    document.querySelectorAll("input").forEach(input => {
    input.addEventListener("focus", playInputFocusSound);
  });

  </script>  
</body>
</html>
